<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <%- include('../partials/header') %>
</head>
<body>
    <%- include('../partials/navbar') %>
    
    <div class="main-content">
        <%- body %>
    </div>

    <%- include('../partials/footer') %>
    
    <!-- Load all scripts at the end of body -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
    
    <!-- Theme Toggle Script -->
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update button text
            const themeBtn = document.querySelector('button[onclick="toggleTheme()"]');
            if (themeBtn) {
                themeBtn.textContent = newTheme === 'light' ? 'ðŸŒ“ Dark' : 'ðŸŒ“ Light';
            }
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Update button text
            const themeBtn = document.querySelector('button[onclick="toggleTheme()"]');
            if (themeBtn) {
                themeBtn.textContent = savedTheme === 'light' ? 'ðŸŒ“ Dark' : 'ðŸŒ“ Light';
            }
        });
    </script>
    
    <!-- Custom JS -->
    <script src="/js/scripts.js"></script>
</body>
</html>