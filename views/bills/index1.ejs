<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales & Returns Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #4cc9f0;
            --danger-color: #f72585;
            --warning-color: #f8961e;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            background-color: #f5f7fb;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border: none;
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
        }
        
        .bg-primary {
            background-color: var(--primary-color) !important;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-success {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            border-color: var(--warning-color);
            color: white;
        }
        
        .mode-indicator {
            font-size: 0.85rem;
            padding: 5px 10px;
            border-radius: 20px;
        }
        
        .transaction-table th {
            background-color: #e9ecef;
            font-weight: 600;
        }
        
        .summary-card {
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
        }
        
        .return-item {
            background-color: #fff0f5;
        }
        
        .sale-item {
            background-color: #f0f8ff;
        }
        
        .nav-tabs .nav-link.active {
            font-weight: 600;
            border-bottom: 3px solid var(--primary-color);
        }
        
        .search-highlight {
            background-color: #fff3cd;
        }
        
        #productListModal .modal-header {
            background-color: var(--primary-color);
            color: white;
        }
        
        .cursor-pointer {
            cursor: pointer;
        }
        
        .transaction-history {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-md-8 mx-auto text-center">
                <h1 class="mb-3"><i class="fas fa-cash-register me-2"></i>Sales & Returns Management</h1>
                <p class="lead">Process sales and returns in a single interface</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <div class="col-md-8">
                <!-- Mode Toggle -->
                <div class="card mb-4">
                    <div class="card-body py-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Transaction Type</h5>
                            <div class="d-flex">
                                <span class="mode-indicator bg-success me-2" id="saleModeIndicator">Sale Mode</span>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="modeToggle" style="width: 3rem; height: 1.5rem;">
                                </div>
                                <span class="mode-indicator bg-danger ms-2" id="returnModeIndicator">Return Mode</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Information -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Customer Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Customer Name</label>
                                <input type="text" class="form-control" id="customerName" placeholder="Enter customer name">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Phone Number</label>
                                <input type="text" class="form-control" id="customerPhone" placeholder="Enter phone number">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="customerEmail" placeholder="Enter email address">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Customer ID</label>
                                <input type="text" class="form-control" id="customerId" placeholder="Optional customer ID">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Search and Selection -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Product Selection</h5>
                        <button class="btn btn-sm btn-light" id="viewProductsBtn">
                            <i class="fas fa-boxes me-1"></i>View All Products
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Search Products</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="productSearch" placeholder="Scan barcode or search products">
                                <button class="btn btn-outline-secondary" type="button" id="scanBarcodeBtn">
                                    <i class="fas fa-barcode"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Search Results -->
                        <div class="card mb-3" id="searchResultsCard" style="display: none;">
                            <div class="card-body p-2">
                                <h6 class="card-title">Search Results</h6>
                                <div class="list-group" id="searchResultsList">
                                    <!-- Search results will appear here -->
                                </div>
                            </div>
                        </div>

                        <!-- Transaction Items Table -->
                        <div class="table-responsive">
                            <table class="table table-sm transaction-table" id="transactionItems">
                                <thead>
                                    <tr>
                                        <th width="30%">Product</th>
                                        <th width="15%">Price</th>
                                        <th width="10%">Qty</th>
                                        <th width="15%">Discount</th>
                                        <th width="15%">Tax</th>
                                        <th width="10%">Total</th>
                                        <th width="5%"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Transaction items will appear here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Payment Information -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Payment Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Payment Method</label>
                                <select class="form-select" id="paymentMethod">
                                    <option value="cash">Cash</option>
                                    <option value="card">Credit/Debit Card</option>
                                    <option value="mobile">Mobile Payment</option>
                                    <option value="bank">Bank Transfer</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label" id="paymentAmountLabel">Amount Paid</label>
                                <input type="number" class="form-control" id="paymentAmount" value="0.00" min="0" step="0.01">
                            </div>
                            <div class="col-md-12 mb-3">
                                <label class="form-label">Additional Notes</label>
                                <textarea class="form-control" id="transactionNotes" rows="2" placeholder="Any additional notes for this transaction"></textarea>
                            </div>
                            <div class="col-md-12 mb-3" id="returnReasonSection" style="display: none;">
                                <label class="form-label">Return Reason</label>
                                <textarea class="form-control" id="returnReason" rows="2" placeholder="Reason for return"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Transaction Summary -->
            <div class="col-md-4">
                <!-- Summary Card -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Transaction Summary</h5>
                    </div>
                    <div class="card-body">
                        <div class="summary-card p-3 mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Subtotal:</span>
                                <span id="summarySubtotal">$0.00</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Total Discount:</span>
                                <span id="summaryDiscount">-$0.00</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Total Tax:</span>
                                <span id="summaryTax">$0.00</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between fw-bold fs-5 mb-3">
                                <span>Total Amount:</span>
                                <span id="summaryTotal">$0.00</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span id="paymentTypeLabel">Amount Paid:</span>
                                <span id="summaryPaid">$0.00</span>
                            </div>
                            <div class="d-flex justify-content-between fw-bold" id="changeSection">
                                <span>Change:</span>
                                <span id="summaryChange">$0.00</span>
                            </div>
                            <div class="d-flex justify-content-between fw-bold text-danger" id="refundSection" style="display: none;">
                                <span>Refund Amount:</span>
                                <span id="summaryRefund">$0.00</span>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-grid gap-2">
                            <button class="btn btn-secondary mb-2" id="clearTransactionBtn">
                                <i class="fas fa-times me-2"></i>Clear Transaction
                            </button>
                            <button class="btn btn-warning mb-2" id="saveDraftBtn">
                                <i class="fas fa-save me-2"></i>Save as Draft
                            </button>
                            <button class="btn btn-success mb-2" id="holdTransactionBtn">
                                <i class="fas fa-pause me-2"></i>Hold Transaction
                            </button>
                            <button class="btn btn-primary mb-2" id="finalizeBtn">
                                <i class="fas fa-check-circle me-2"></i>Finalize Sale
                            </button>
                            <button class="btn btn-danger" id="processReturnBtn" style="display: none;">
                                <i class="fas fa-undo me-2"></i>Process Return
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Recent Transactions</h5>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-tabs" id="transactionTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="sales-tab" data-bs-toggle="tab" data-bs-target="#sales" type="button" role="tab">Sales</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="returns-tab" data-bs-toggle="tab" data-bs-target="#returns" type="button" role="tab">Returns</button>
                            </li>
                        </ul>
                        <div class="tab-content transaction-history pt-3" id="transactionTabContent">
                            <div class="tab-pane fade show active" id="sales" role="tabpanel">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center cursor-pointer">
                                        <div>
                                            <div class="fw-bold">#INV-2023-1001</div>
                                            <div class="small">John Doe • Today 10:30 AM</div>
                                        </div>
                                        <span class="badge bg-success rounded-pill">$125.50</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center cursor-pointer">
                                        <div>
                                            <div class="fw-bold">#INV-2023-1002</div>
                                            <div class="small">Jane Smith • Today 09:15 AM</div>
                                        </div>
                                        <span class="badge bg-success rounded-pill">$89.99</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center cursor-pointer">
                                        <div>
                                            <div class="fw-bold">#INV-2023-1003</div>
                                            <div class="small">Robert Johnson • Yesterday</div>
                                        </div>
                                        <span class="badge bg-success rounded-pill">$215.75</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-pane fade" id="returns" role="tabpanel">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center cursor-pointer">
                                        <div>
                                            <div class="fw-bold">#RET-2023-1001</div>
                                            <div class="small">Defective item • Today 11:45 AM</div>
                                        </div>
                                        <span class="badge bg-danger rounded-pill">-$45.99</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center cursor-pointer">
                                        <div>
                                            <div class="fw-bold">#RET-2023-1002</div>
                                            <div class="small">Wrong size • Yesterday</div>
                                        </div>
                                        <span class="badge bg-danger rounded-pill">-$32.50</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product List Modal -->
    <div class="modal fade" id="productListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Product Catalog</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Search products..." id="modalProductSearch">
                        <button class="btn btn-outline-secondary" type="button">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Wireless Headphones</td>
                                    <td>$59.99</td>
                                    <td>42</td>
                                    <td><button class="btn btn-sm btn-primary">Add</button></td>
                                </tr>
                                <tr>
                                    <td>Bluetooth Speaker</td>
                                    <td>$39.99</td>
                                    <td>27</td>
                                    <td><button class="btn btn-sm btn-primary">Add</button></td>
                                </tr>
                                <tr>
                                    <td>Smart Watch</td>
                                    <td>$199.99</td>
                                    <td>15</td>
                                    <td><button class="btn btn-sm btn-primary">Add</button></td>
                                </tr>
                                <tr>
                                    <td>Phone Case</td>
                                    <td>$19.99</td>
                                    <td>83</td>
                                    <td><button class="btn btn-sm btn-primary">Add</button></td>
                                </tr>
                                <tr>
                                    <td>USB-C Cable</td>
                                    <td>$12.99</td>
                                    <td>126</td>
                                    <td><button class="btn btn-sm btn-primary">Add</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mode toggle functionality
            const modeToggle = document.getElementById('modeToggle');
            const saleModeIndicator = document.getElementById('saleModeIndicator');
            const returnModeIndicator = document.getElementById('returnModeIndicator');
            const returnReasonSection = document.getElementById('returnReasonSection');
            const finalizeBtn = document.getElementById('finalizeBtn');
            const processReturnBtn = document.getElementById('processReturnBtn');
            const changeSection = document.getElementById('changeSection');
            const refundSection = document.getElementById('refundSection');
            const paymentAmountLabel = document.getElementById('paymentAmountLabel');
            const paymentTypeLabel = document.getElementById('paymentTypeLabel');
            
            modeToggle.addEventListener('change', function() {
                if (this.checked) {
                    // Return mode
                    saleModeIndicator.classList.remove('bg-success');
                    saleModeIndicator.classList.add('bg-secondary');
                    returnModeIndicator.classList.remove('bg-secondary');
                    returnModeIndicator.classList.add('bg-danger');
                    returnReasonSection.style.display = 'block';
                    finalizeBtn.style.display = 'none';
                    processReturnBtn.style.display = 'block';
                    changeSection.style.display = 'none';
                    refundSection.style.display = 'flex';
                    paymentAmountLabel.textContent = 'Amount Refunded';
                    paymentTypeLabel.textContent = 'Amount Refunded:';
                } else {
                    // Sale mode
                    saleModeIndicator.classList.remove('bg-secondary');
                    saleModeIndicator.classList.add('bg-success');
                    returnModeIndicator.classList.remove('bg-danger');
                    returnModeIndicator.classList.add('bg-secondary');
                    returnReasonSection.style.display = 'none';
                    finalizeBtn.style.display = 'block';
                    processReturnBtn.style.display = 'none';
                    changeSection.style.display = 'flex';
                    refundSection.style.display = 'none';
                    paymentAmountLabel.textContent = 'Amount Paid';
                    paymentTypeLabel.textContent = 'Amount Paid:';
                }
            });
            
            // Product search functionality
            const productSearch = document.getElementById('productSearch');
            const searchResultsCard = document.getElementById('searchResultsCard');
            const searchResultsList = document.getElementById('searchResultsList');
            
            productSearch.addEventListener('input', function() {
                if (this.value.length > 2) {
                    // Simulate search results
                    searchResultsCard.style.display = 'block';
                    searchResultsList.innerHTML = `
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">Wireless Headphones</h6>
                                <small class="text-muted">$59.99</small>
                            </div>
                            <p class="mb-1">SKU: WH-1000XM4</p>
                            <small class="text-muted">In stock: 42</small>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">Bluetooth Speaker</h6>
                                <small class="text-muted">$39.99</small>
                            </div>
                            <p class="mb-1">SKU: BT-SPKR250</p>
                            <small class="text-muted">In stock: 27</small>
                        </a>
                    `;
                } else {
                    searchResultsCard.style.display = 'none';
                }
            });
            
            // View Products Modal
            const viewProductsBtn = document.getElementById('viewProductsBtn');
            const productListModal = new bootstrap.Modal(document.getElementById('productListModal'));
            
            viewProductsBtn.addEventListener('click', function() {
                productListModal.show();
            });
            
            // Add sample transaction items
            const transactionItems = document.getElementById('transactionItems').querySelector('tbody');
            
            // Sample data for demonstration
            const sampleItems = [
                { name: 'Wireless Headphones', price: 59.99, quantity: 1, discount: 0, tax: 5.40, total: 65.39 },
                { name: 'Phone Case', price: 19.99, quantity: 2, discount: 2.00, tax: 3.42, total: 41.40 }
            ];
            
            // Function to add items to the transaction table
            function addItemToTransaction(item, isReturn = false) {
                const row = transactionItems.insertRow();
                if (isReturn) {
                    row.classList.add('return-item');
                } else {
                    row.classList.add('sale-item');
                }
                
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>$${item.price.toFixed(2)}</td>
                    <td>
                        <input type="number" class="form-control form-control-sm" value="${item.quantity}" min="1">
                    </td>
                    <td>
                        <input type="number" class="form-control form-control-sm" value="${item.discount.toFixed(2)}" min="0" step="0.01">
                    </td>
                    <td>$${item.tax.toFixed(2)}</td>
                    <td>$${item.total.toFixed(2)}</td>
                    <td>
                        <button class="btn btn-sm btn-danger">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                updateSummary();
            }
            
            // Add sample items
            sampleItems.forEach(item => addItemToTransaction(item));
            
            // Update transaction summary
            function updateSummary() {
                const subtotal = 107.38; // Sample value
                const discount = 2.00; // Sample value
                const tax = 8.82; // Sample value
                const total = 114.20; // Sample value
                const paid = 120.00; // Sample value
                const change = 5.80; // Sample value
                const refund = 114.20; // Sample value
                
                document.getElementById('summarySubtotal').textContent = `$${subtotal.toFixed(2)}`;
                document.getElementById('summaryDiscount').textContent = `-$${discount.toFixed(2)}`;
                document.getElementById('summaryTax').textContent = `$${tax.toFixed(2)}`;
                document.getElementById('summaryTotal').textContent = `$${total.toFixed(2)}`;
                document.getElementById('summaryPaid').textContent = `$${paid.toFixed(2)}`;
                document.getElementById('summaryChange').textContent = `$${change.toFixed(2)}`;
                document.getElementById('summaryRefund').textContent = `$${refund.toFixed(2)}`;
            }
            
            // Initialize summary
            updateSummary();
            
            // Clear transaction button
            document.getElementById('clearTransactionBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to clear this transaction?')) {
                    transactionItems.innerHTML = '';
                    document.getElementById('customerName').value = '';
                    document.getElementById('customerPhone').value = '';
                    document.getElementById('customerEmail').value = '';
                    document.getElementById('customerId').value = '';
                    document.getElementById('paymentAmount').value = '0.00';
                    document.getElementById('transactionNotes').value = '';
                    document.getElementById('returnReason').value = '';
                    updateSummary();
                }
            });
            
            // Finalize sale button
            document.getElementById('finalizeBtn').addEventListener('click', function() {
                alert('Sale finalized successfully! Transaction has been recorded.');
            });
            
            // Process return button
            document.getElementById('processReturnBtn').addEventListener('click', function() {
                alert('Return processed successfully! Refund has been issued.');
            });
        });
    </script>
</body>
</html>